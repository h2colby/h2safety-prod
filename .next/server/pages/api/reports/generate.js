"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/reports/generate";
exports.ids = ["pages/api/reports/generate"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "firebase-admin/app":
/*!*************************************!*\
  !*** external "firebase-admin/app" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("firebase-admin/app");;

/***/ }),

/***/ "firebase-admin/firestore":
/*!*******************************************!*\
  !*** external "firebase-admin/firestore" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = import("firebase-admin/firestore");;

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freports%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freports%2Fgenerate.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freports%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freports%2Fgenerate.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_reports_generate_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/reports/generate.ts */ \"(api)/./pages/api/reports/generate.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_reports_generate_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_reports_generate_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_reports_generate_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_reports_generate_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/reports/generate\",\n        pathname: \"/api/reports/generate\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_reports_generate_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnJlcG9ydHMlMkZnZW5lcmF0ZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGcmVwb3J0cyUyRmdlbmVyYXRlLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzREO0FBQzVEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywyREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMkRBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcmVwb3J0cy9nZW5lcmF0ZS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmVwb3J0cy9nZW5lcmF0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3JlcG9ydHMvZ2VuZXJhdGVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freports%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freports%2Fgenerate.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/reports/generate.ts":
/*!***************************************!*\
  !*** ./pages/api/reports/generate.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin/app */ \"firebase-admin/app\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin/firestore */ \"firebase-admin/firestore\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__, firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__, openai__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__, firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__, openai__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// pages/api/reports/generate.ts\n\n\n\n// Validate required environment variables\nif (!process.env.FIREBASE_SERVICE_ACCOUNT_KEY_BASE64 || !process.env.OPENAI_API_KEY) {\n    throw new Error('Required environment variables are not set.');\n}\n// Decode and initialize Firebase Admin SDK\nconst base64 = process.env.FIREBASE_SERVICE_ACCOUNT_KEY_BASE64;\nconst serviceAccount = JSON.parse(Buffer.from(base64, 'base64').toString('utf-8'));\nif (!(0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length) {\n    (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)({\n        credential: (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_0__.cert)(serviceAccount)\n    });\n}\nconst adminDb = (0,firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)();\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_2__.OpenAI({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function handler(req, res) {\n    const { projectId, threadId, reportType, customPrompt } = req.body;\n    // Validate required fields\n    if (typeof projectId !== 'string' || typeof threadId !== 'string' || typeof reportType !== 'string') {\n        return res.status(400).json({\n            error: 'Missing or invalid projectId, threadId, or reportType'\n        });\n    }\n    try {\n        // ---------------------------------------------\n        // Step 1: Fetch Project Data\n        // ---------------------------------------------\n        const projectRef = adminDb.doc(`projects/${projectId}`);\n        const projectSnap = await projectRef.get();\n        if (!projectSnap.exists) {\n            return res.status(404).json({\n                error: 'Project not found'\n            });\n        }\n        const projectData = projectSnap.data();\n        const userId = projectData.ownerId || null;\n        // ---------------------------------------------\n        // Step 2: Fetch and Parse Thread Messages\n        // ---------------------------------------------\n        const threadRef = adminDb.doc(`threads/${threadId}`);\n        const threadSnap = await threadRef.get();\n        if (!threadSnap.exists) {\n            return res.status(404).json({\n                error: 'Thread not found'\n            });\n        }\n        const threadData = threadSnap.data();\n        const messages = threadData.messages || [];\n        // Convert messages into { role, content } format\n        const allMessages = messages.map((m)=>({\n                role: m.sender === 'ai' ? 'assistant' : 'user',\n                content: m.content\n            }));\n        // Create a readable conversation text\n        const conversationText = allMessages.map((m)=>`${m.role === 'assistant' ? 'AI:' : 'User:'} ${m.content}`).join('\\n\\n');\n        // ---------------------------------------------\n        // Step 3: Define Prompts Based on Report Type\n        // ---------------------------------------------\n        let prompt = '';\n        let systemContent = '';\n        switch(reportType){\n            case 'summary':\n                systemContent = 'You are a professional technical report writer specializing in hydrogen engineering.';\n                prompt = `\nWrite a **comprehensive summary report** for the following hydrogen project and its associated messages.\n\n**Project Details**: ${JSON.stringify(projectData, null, 2)}  \n**Thread Conversation**:  \n${conversationText}\n\nThe summary must include:\n1. Main topics discussed in the conversation.\n2. Key technical findings or standards mentioned.\n3. Important conclusions and actionable next steps.\n4. A professional tone with structured sections.\n`;\n                break;\n            case 'communication':\n                systemContent = 'You are a professional communicator skilled at writing informal summaries for email sharing.';\n                prompt = `\nWrite an **informal communication summary** of the project thread, highlighting:\n1. Main research findings or discussion points.\n2. Big questions or potential safety concerns.\n3. Relevant standards or codes.\n4. Recommended next steps.\n\n**Project Details**: ${JSON.stringify(projectData, null, 2)}  \n**Thread Conversation**:  \n${conversationText}\n\nKeep it professional but conversational, suitable for internal email communication.\n`;\n                break;\n            case 'custom':\n                if (typeof customPrompt !== 'string' || !customPrompt.trim()) {\n                    return res.status(400).json({\n                        error: 'Custom prompt is required for custom reports.'\n                    });\n                }\n                systemContent = 'You are a versatile technical assistant skilled at generating customized reports.';\n                prompt = `\nUsing the provided project details and conversation history, create a report tailored to the following custom request:\n\"${customPrompt}\"\n\n**Project Details**: ${JSON.stringify(projectData, null, 2)}  \n**Thread Conversation**:  \n${conversationText}\n\nEnsure the report is professional, detailed, and tailored to the custom request.\n`;\n                break;\n            default:\n                return res.status(400).json({\n                    error: 'Invalid reportType. Use summary, communication, or custom.'\n                });\n        }\n        // ---------------------------------------------\n        // Step 4: Generate Report with OpenAI\n        // ---------------------------------------------\n        const reportResponse = await openai.chat.completions.create({\n            model: 'gpt-4o-mini',\n            messages: [\n                {\n                    role: 'system',\n                    content: systemContent\n                },\n                {\n                    role: 'user',\n                    content: prompt\n                }\n            ],\n            temperature: 0.2,\n            max_tokens: 6000,\n            frequency_penalty: 0.4,\n            presence_penalty: 0.2\n        });\n        const reportContent = reportResponse.choices[0]?.message?.content || 'No report content generated.';\n        // ---------------------------------------------\n        // Step 5: Save Report to Firestore\n        // ---------------------------------------------\n        const reportRef = adminDb.collection('reports').doc();\n        await reportRef.set({\n            projectId,\n            userId,\n            title: `Report - ${projectData.projectName || 'Project'} (${reportType})`,\n            content: reportContent,\n            type: reportType,\n            createdAt: new Date()\n        });\n        // ---------------------------------------------\n        // Step 6: Return Report Content\n        // ---------------------------------------------\n        return res.status(200).json({\n            message: `${reportType.charAt(0).toUpperCase() + reportType.slice(1)} report generated successfully.`,\n            content: reportContent\n        });\n    } catch (error) {\n        console.error('Error generating report:', error.message);\n        return res.status(500).json({\n            error: 'An internal error occurred while generating the report.'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTbEIsV0FBVztRQUVyRSxnREFBZ0Q7UUFDaEQsbUNBQW1DO1FBQ25DLGdEQUFnRDtRQUNoRCxNQUFNbUIsWUFBWW5ELFFBQVFvRCxVQUFVLENBQUMsV0FBV3JDLEdBQUc7UUFDbkQsTUFBTW9DLFVBQVVFLEdBQUcsQ0FBQztZQUNsQi9DO1lBQ0FlO1lBQ0FpQyxPQUFPLENBQUMsU0FBUyxFQUFFbkMsWUFBWW9DLFdBQVcsSUFBSSxVQUFVLEVBQUUsRUFBRS9DLFdBQVcsQ0FBQyxDQUFDO1lBQ3pFd0IsU0FBU2dCO1lBQ1RRLE1BQU1oRDtZQUNOaUQsV0FBVyxJQUFJQztRQUNqQjtRQUVBLGdEQUFnRDtRQUNoRCxnQ0FBZ0M7UUFDaEMsZ0RBQWdEO1FBQ2hELE9BQU9yRCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCc0MsU0FBUyxHQUFHMUMsV0FBV21ELE1BQU0sQ0FBQyxHQUFHQyxXQUFXLEtBQUtwRCxXQUFXcUQsS0FBSyxDQUFDLEdBQUcsK0JBQStCLENBQUM7WUFDckc3QixTQUFTZ0I7UUFDWDtJQUNGLEVBQUUsT0FBT25DLE9BQVk7UUFDbkJpRCxRQUFRakQsS0FBSyxDQUFDLDRCQUE0QkEsTUFBTXFDLE9BQU87UUFDdkQsT0FBTzdDLElBQUlNLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUEwRDtJQUNqRztBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdG9iZS9IMlNhZmV0eURldi9oMnNhZmV0eS1haS9wYWdlcy9hcGkvcmVwb3J0cy9nZW5lcmF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvcmVwb3J0cy9nZW5lcmF0ZS50c1xuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBjZXJ0IH0gZnJvbSAnZmlyZWJhc2UtYWRtaW4vYXBwJztcbmltcG9ydCB7IGdldEZpcmVzdG9yZSB9IGZyb20gJ2ZpcmViYXNlLWFkbWluL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyBPcGVuQUkgfSBmcm9tICdvcGVuYWknO1xuXG4vLyBWYWxpZGF0ZSByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmlmICghcHJvY2Vzcy5lbnYuRklSRUJBU0VfU0VSVklDRV9BQ0NPVU5UX0tFWV9CQVNFNjQgfHwgIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBub3Qgc2V0LicpO1xufVxuXG4vLyBEZWNvZGUgYW5kIGluaXRpYWxpemUgRmlyZWJhc2UgQWRtaW4gU0RLXG5jb25zdCBiYXNlNjQgPSBwcm9jZXNzLmVudi5GSVJFQkFTRV9TRVJWSUNFX0FDQ09VTlRfS0VZX0JBU0U2NDtcbmNvbnN0IHNlcnZpY2VBY2NvdW50ID0gSlNPTi5wYXJzZShCdWZmZXIuZnJvbShiYXNlNjQsICdiYXNlNjQnKS50b1N0cmluZygndXRmLTgnKSk7XG5cbmlmICghZ2V0QXBwcygpLmxlbmd0aCkge1xuICBpbml0aWFsaXplQXBwKHsgY3JlZGVudGlhbDogY2VydChzZXJ2aWNlQWNjb3VudCkgfSk7XG59XG5cbmNvbnN0IGFkbWluRGIgPSBnZXRGaXJlc3RvcmUoKTtcbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnN0IHsgcHJvamVjdElkLCB0aHJlYWRJZCwgcmVwb3J0VHlwZSwgY3VzdG9tUHJvbXB0IH0gPSByZXEuYm9keTtcblxuICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgaWYgKHR5cGVvZiBwcm9qZWN0SWQgIT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0aHJlYWRJZCAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIHJlcG9ydFR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyg0MDApXG4gICAgICAuanNvbih7IGVycm9yOiAnTWlzc2luZyBvciBpbnZhbGlkIHByb2plY3RJZCwgdGhyZWFkSWQsIG9yIHJlcG9ydFR5cGUnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTdGVwIDE6IEZldGNoIFByb2plY3QgRGF0YVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNvbnN0IHByb2plY3RSZWYgPSBhZG1pbkRiLmRvYyhgcHJvamVjdHMvJHtwcm9qZWN0SWR9YCk7XG4gICAgY29uc3QgcHJvamVjdFNuYXAgPSBhd2FpdCBwcm9qZWN0UmVmLmdldCgpO1xuXG4gICAgaWYgKCFwcm9qZWN0U25hcC5leGlzdHMpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnUHJvamVjdCBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHByb2plY3REYXRhID0gcHJvamVjdFNuYXAuZGF0YSgpITtcbiAgICBjb25zdCB1c2VySWQgPSBwcm9qZWN0RGF0YS5vd25lcklkIHx8IG51bGw7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTdGVwIDI6IEZldGNoIGFuZCBQYXJzZSBUaHJlYWQgTWVzc2FnZXNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb25zdCB0aHJlYWRSZWYgPSBhZG1pbkRiLmRvYyhgdGhyZWFkcy8ke3RocmVhZElkfWApO1xuICAgIGNvbnN0IHRocmVhZFNuYXAgPSBhd2FpdCB0aHJlYWRSZWYuZ2V0KCk7XG5cbiAgICBpZiAoIXRocmVhZFNuYXAuZXhpc3RzKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1RocmVhZCBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHRocmVhZERhdGEgPSB0aHJlYWRTbmFwLmRhdGEoKSE7XG4gICAgY29uc3QgbWVzc2FnZXMgPSB0aHJlYWREYXRhLm1lc3NhZ2VzIHx8IFtdO1xuXG4gICAgLy8gQ29udmVydCBtZXNzYWdlcyBpbnRvIHsgcm9sZSwgY29udGVudCB9IGZvcm1hdFxuICAgIGNvbnN0IGFsbE1lc3NhZ2VzOiBBcnJheTx7IHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnOyBjb250ZW50OiBzdHJpbmcgfT4gPSBtZXNzYWdlcy5tYXAoKG06IGFueSkgPT4gKHtcbiAgICAgIHJvbGU6IG0uc2VuZGVyID09PSAnYWknID8gJ2Fzc2lzdGFudCcgOiAndXNlcicsXG4gICAgICBjb250ZW50OiBtLmNvbnRlbnQsXG4gICAgfSkpO1xuXG4gICAgLy8gQ3JlYXRlIGEgcmVhZGFibGUgY29udmVyc2F0aW9uIHRleHRcbiAgICBjb25zdCBjb252ZXJzYXRpb25UZXh0ID0gYWxsTWVzc2FnZXNcbiAgICAgIC5tYXAoKG0pID0+IGAke20ucm9sZSA9PT0gJ2Fzc2lzdGFudCcgPyAnQUk6JyA6ICdVc2VyOid9ICR7bS5jb250ZW50fWApXG4gICAgICAuam9pbignXFxuXFxuJyk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTdGVwIDM6IERlZmluZSBQcm9tcHRzIEJhc2VkIG9uIFJlcG9ydCBUeXBlXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgbGV0IHByb21wdCA9ICcnO1xuICAgIGxldCBzeXN0ZW1Db250ZW50ID0gJyc7XG5cbiAgICBzd2l0Y2ggKHJlcG9ydFR5cGUpIHtcbiAgICAgIGNhc2UgJ3N1bW1hcnknOlxuICAgICAgICBzeXN0ZW1Db250ZW50ID0gJ1lvdSBhcmUgYSBwcm9mZXNzaW9uYWwgdGVjaG5pY2FsIHJlcG9ydCB3cml0ZXIgc3BlY2lhbGl6aW5nIGluIGh5ZHJvZ2VuIGVuZ2luZWVyaW5nLic7XG4gICAgICAgIHByb21wdCA9IGBcbldyaXRlIGEgKipjb21wcmVoZW5zaXZlIHN1bW1hcnkgcmVwb3J0KiogZm9yIHRoZSBmb2xsb3dpbmcgaHlkcm9nZW4gcHJvamVjdCBhbmQgaXRzIGFzc29jaWF0ZWQgbWVzc2FnZXMuXG5cbioqUHJvamVjdCBEZXRhaWxzKio6ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdERhdGEsIG51bGwsIDIpfSAgXG4qKlRocmVhZCBDb252ZXJzYXRpb24qKjogIFxuJHtjb252ZXJzYXRpb25UZXh0fVxuXG5UaGUgc3VtbWFyeSBtdXN0IGluY2x1ZGU6XG4xLiBNYWluIHRvcGljcyBkaXNjdXNzZWQgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbjIuIEtleSB0ZWNobmljYWwgZmluZGluZ3Mgb3Igc3RhbmRhcmRzIG1lbnRpb25lZC5cbjMuIEltcG9ydGFudCBjb25jbHVzaW9ucyBhbmQgYWN0aW9uYWJsZSBuZXh0IHN0ZXBzLlxuNC4gQSBwcm9mZXNzaW9uYWwgdG9uZSB3aXRoIHN0cnVjdHVyZWQgc2VjdGlvbnMuXG5gO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tbXVuaWNhdGlvbic6XG4gICAgICAgIHN5c3RlbUNvbnRlbnQgPSAnWW91IGFyZSBhIHByb2Zlc3Npb25hbCBjb21tdW5pY2F0b3Igc2tpbGxlZCBhdCB3cml0aW5nIGluZm9ybWFsIHN1bW1hcmllcyBmb3IgZW1haWwgc2hhcmluZy4nO1xuICAgICAgICBwcm9tcHQgPSBgXG5Xcml0ZSBhbiAqKmluZm9ybWFsIGNvbW11bmljYXRpb24gc3VtbWFyeSoqIG9mIHRoZSBwcm9qZWN0IHRocmVhZCwgaGlnaGxpZ2h0aW5nOlxuMS4gTWFpbiByZXNlYXJjaCBmaW5kaW5ncyBvciBkaXNjdXNzaW9uIHBvaW50cy5cbjIuIEJpZyBxdWVzdGlvbnMgb3IgcG90ZW50aWFsIHNhZmV0eSBjb25jZXJucy5cbjMuIFJlbGV2YW50IHN0YW5kYXJkcyBvciBjb2Rlcy5cbjQuIFJlY29tbWVuZGVkIG5leHQgc3RlcHMuXG5cbioqUHJvamVjdCBEZXRhaWxzKio6ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdERhdGEsIG51bGwsIDIpfSAgXG4qKlRocmVhZCBDb252ZXJzYXRpb24qKjogIFxuJHtjb252ZXJzYXRpb25UZXh0fVxuXG5LZWVwIGl0IHByb2Zlc3Npb25hbCBidXQgY29udmVyc2F0aW9uYWwsIHN1aXRhYmxlIGZvciBpbnRlcm5hbCBlbWFpbCBjb21tdW5pY2F0aW9uLlxuYDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2N1c3RvbSc6XG4gICAgICAgIGlmICh0eXBlb2YgY3VzdG9tUHJvbXB0ICE9PSAnc3RyaW5nJyB8fCAhY3VzdG9tUHJvbXB0LnRyaW0oKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnQ3VzdG9tIHByb21wdCBpcyByZXF1aXJlZCBmb3IgY3VzdG9tIHJlcG9ydHMuJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBzeXN0ZW1Db250ZW50ID0gJ1lvdSBhcmUgYSB2ZXJzYXRpbGUgdGVjaG5pY2FsIGFzc2lzdGFudCBza2lsbGVkIGF0IGdlbmVyYXRpbmcgY3VzdG9taXplZCByZXBvcnRzLic7XG4gICAgICAgIHByb21wdCA9IGBcblVzaW5nIHRoZSBwcm92aWRlZCBwcm9qZWN0IGRldGFpbHMgYW5kIGNvbnZlcnNhdGlvbiBoaXN0b3J5LCBjcmVhdGUgYSByZXBvcnQgdGFpbG9yZWQgdG8gdGhlIGZvbGxvd2luZyBjdXN0b20gcmVxdWVzdDpcblwiJHtjdXN0b21Qcm9tcHR9XCJcblxuKipQcm9qZWN0IERldGFpbHMqKjogJHtKU09OLnN0cmluZ2lmeShwcm9qZWN0RGF0YSwgbnVsbCwgMil9ICBcbioqVGhyZWFkIENvbnZlcnNhdGlvbioqOiAgXG4ke2NvbnZlcnNhdGlvblRleHR9XG5cbkVuc3VyZSB0aGUgcmVwb3J0IGlzIHByb2Zlc3Npb25hbCwgZGV0YWlsZWQsIGFuZCB0YWlsb3JlZCB0byB0aGUgY3VzdG9tIHJlcXVlc3QuXG5gO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHJlcG9ydFR5cGUuIFVzZSBzdW1tYXJ5LCBjb21tdW5pY2F0aW9uLCBvciBjdXN0b20uJyB9KTtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTdGVwIDQ6IEdlbmVyYXRlIFJlcG9ydCB3aXRoIE9wZW5BSVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNvbnN0IHJlcG9ydFJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmknLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtQ29udGVudCB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH0sXG4gICAgICBdLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMixcbiAgICAgIG1heF90b2tlbnM6IDYwMDAsXG4gICAgICBmcmVxdWVuY3lfcGVuYWx0eTogMC40LFxuICAgICAgcHJlc2VuY2VfcGVuYWx0eTogMC4yLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVwb3J0Q29udGVudCA9IHJlcG9ydFJlc3BvbnNlLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgJ05vIHJlcG9ydCBjb250ZW50IGdlbmVyYXRlZC4nO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU3RlcCA1OiBTYXZlIFJlcG9ydCB0byBGaXJlc3RvcmVcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb25zdCByZXBvcnRSZWYgPSBhZG1pbkRiLmNvbGxlY3Rpb24oJ3JlcG9ydHMnKS5kb2MoKTtcbiAgICBhd2FpdCByZXBvcnRSZWYuc2V0KHtcbiAgICAgIHByb2plY3RJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIHRpdGxlOiBgUmVwb3J0IC0gJHtwcm9qZWN0RGF0YS5wcm9qZWN0TmFtZSB8fCAnUHJvamVjdCd9ICgke3JlcG9ydFR5cGV9KWAsXG4gICAgICBjb250ZW50OiByZXBvcnRDb250ZW50LFxuICAgICAgdHlwZTogcmVwb3J0VHlwZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9KTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFN0ZXAgNjogUmV0dXJuIFJlcG9ydCBDb250ZW50XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IGAke3JlcG9ydFR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyByZXBvcnRUeXBlLnNsaWNlKDEpfSByZXBvcnQgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseS5gLFxuICAgICAgY29udGVudDogcmVwb3J0Q29udGVudCxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgcmVwb3J0OicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnQW4gaW50ZXJuYWwgZXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2VuZXJhdGluZyB0aGUgcmVwb3J0LicgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZ2V0QXBwcyIsImluaXRpYWxpemVBcHAiLCJjZXJ0IiwiZ2V0RmlyZXN0b3JlIiwiT3BlbkFJIiwicHJvY2VzcyIsImVudiIsIkZJUkVCQVNFX1NFUlZJQ0VfQUNDT1VOVF9LRVlfQkFTRTY0IiwiT1BFTkFJX0FQSV9LRVkiLCJFcnJvciIsImJhc2U2NCIsInNlcnZpY2VBY2NvdW50IiwiSlNPTiIsInBhcnNlIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwibGVuZ3RoIiwiY3JlZGVudGlhbCIsImFkbWluRGIiLCJvcGVuYWkiLCJhcGlLZXkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwicHJvamVjdElkIiwidGhyZWFkSWQiLCJyZXBvcnRUeXBlIiwiY3VzdG9tUHJvbXB0IiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInByb2plY3RSZWYiLCJkb2MiLCJwcm9qZWN0U25hcCIsImdldCIsImV4aXN0cyIsInByb2plY3REYXRhIiwiZGF0YSIsInVzZXJJZCIsIm93bmVySWQiLCJ0aHJlYWRSZWYiLCJ0aHJlYWRTbmFwIiwidGhyZWFkRGF0YSIsIm1lc3NhZ2VzIiwiYWxsTWVzc2FnZXMiLCJtYXAiLCJtIiwicm9sZSIsInNlbmRlciIsImNvbnRlbnQiLCJjb252ZXJzYXRpb25UZXh0Iiwiam9pbiIsInByb21wdCIsInN5c3RlbUNvbnRlbnQiLCJzdHJpbmdpZnkiLCJ0cmltIiwicmVwb3J0UmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsImZyZXF1ZW5jeV9wZW5hbHR5IiwicHJlc2VuY2VfcGVuYWx0eSIsInJlcG9ydENvbnRlbnQiLCJjaG9pY2VzIiwibWVzc2FnZSIsInJlcG9ydFJlZiIsImNvbGxlY3Rpb24iLCJzZXQiLCJ0aXRsZSIsInByb2plY3ROYW1lIiwidHlwZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/reports/generate.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freports%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freports%2Fgenerate.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();